["```py\n\nvars: FirstTime (1800),\n    LastTime (2359),\n    ATRmult (3),\n    TRmult (.5),\n    Nb (10),\n    NATR (60),\n    Stoplo(275);\n\n    FirstTime = 1800 ;\n    LastTime = 2359 ;\n\n  if date >= 1090721 and date < 1100104 then\n  begin\n    Nb = 9 ;\n    NATR = 93 ;\n    ATRmult = 3.15 ;\n    TRmult = 0.51 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1100104 and date < 1100617 then\n  begin\n    Nb = 9 ;\nNATR = 93 ;\n    ATRmult = 2.55 ;\n    TRmult = 0.66 ;\n    Stoplo= 375 ;\n  end ;\n  if date >= 1100617 and date < 1101129 then\n  begin\n    Nb = 14 ;\n    NATR = 83 ;\n    ATRmult = 2.75 ;\n    TRmult = 0.71 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1101129 and date < 1110515 then\n  begin\n    Nb = 14 ;\n    NATR = 83 ;\n    ATRmult = 2.75 ;\n    TRmult = 0.66 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1110515 and date < 1111026 then\n  begin\n    Nb = 19 ;\n    NATR = 93 ;\n    ATRmult = 3.15 ;\n    TRmult = 0.56 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1111026 and date < 1120412 then\n  begin\n    Nb = 14 ;\n    NATR = 83 ;\n    ATRmult = 2.95 ;\n    TRmult = 0.61 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1120412 and date < 1120924 then\n  begin\n    Nb = 14 ;\n    NATR = 93 ;\n    ATRmult = 2.95 ;\n    TRmult = 0.61 ;\n    Stoplo= 425 ;\n  end ;\nif date >= 1120924 and date < 1130310 then\n  begin\n    Nb = 19 ;\n    NATR = 73 ;\n    ATRmult = 3.15 ;\n    TRmult = 0.71 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1130310 and date < 1130826 then\n  begin\n    Nb = 14 ;\n    NATR = 93 ;\n    ATRmult = 2.95 ;\n    TRmult = 0.51 ;\n    Stoplo= 425 ;\n  end ;\n  if date >= 1130826 and date < 1140101 then\n  begin\n    Nb = 14 ;\n    NATR = 93 ;\n    ATRmult = 2.55 ;\n    TRmult = 0.71 ;\n    Stoplo= 425 ;\n  end ;\nVar: LongPrice(0), ShortPrice(0), LongTarget(0), ShortTarget(0);\n\n//limit entry prices\nShortPrice = Average(Low, Nb) + ATRmult * AvgTrueRange(NATR);\nLongPrice = Average(High, Nb) - ATRmult * AvgTrueRange(NATR);\n\n{code to ensure only 1 order is entered at each bar - order closest to price}\nvar:diff1(0),diff2(0),EntrytoPick(0);\nEntrytoPick=0;\ndiff1=absvalue(close-LongPrice);\ndiff2=absvalue(close-ShortPrice);\nIf diff1<=diff2 then EntryToPick=1;\nIf diff1>diff2 then EntryToPick=2;\n\nif date >= 1090721 and MarketPosition = 0 and EntriesToday(Date) < 1 and Time >= FirstTime and Time < LastTime then begin\n\nIf EntryToPick=1 then begin\n    Buy(“Long Entry”) next bar at LongPrice limit;\nend;\n\nIf EntryToPick=2 then begin\n    Sell short(“Short Entry”) next bar at ShortPrice limit;\nend;\n\nend;\n\nIf MarketPosition=-1 then begin\n    ShortTarget = EntryPrice - TRmult * TrueRange;\n    Buy to cover(“Short Exit”) next bar at ShortTarget limit;\nend;\n\nIf MarketPosition =1 then begin\n    LongTarget = EntryPrice + TRmult * TrueRange;\n    Sell(“Long Exit”) next bar at LongTarget limit;\nend;\n\nSetstopposition;\nsetstoploss(stoplo);\n\nSetExitOnClose; \n```"]