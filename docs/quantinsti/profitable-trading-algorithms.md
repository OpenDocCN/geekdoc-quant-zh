# 交易算法——找到正确的平衡

> 原文：<https://blog.quantinsti.com/profitable-trading-algorithms/>

扎克·奥克斯

量化指标是一个被广泛争论的话题，但通常我发现最好保持简单，关注两个关键的交易指标来判断一个系统在未来应该如何表现。

通过组合这些度量，您可以创建我称之为预期边缘的东西，它已经被证明对于选择参数、策略甚至系统分配非常有用。

通过利用不同“风格”的系统/参数，您可以进一步多样化现有的信号，从而提高您的底线。

在这篇博客中，我们将讨论:

*   [简介](#introduction)*   [系统采用的方法](#approach)*   [设置系统](#setting-system)*   [趋势跟踪或动量系统](#trend-momentum)*   [均值回归或反趋势风格系统](#mean-reversion)*   [倒票系统](#scalping)*   [平衡贸易指标](#balancing)*   [混音风格](#mixing-styles)

创建一致且有利可图的交易策略从来都不容易，创建通用的自动进场和出场有时甚至更难。要考虑的因素太多了。

你是从数学的角度来看待它，并试图纯粹从数字中找到优势，还是从数字中找到一种新的表达/抽象？

你是否从模式的角度来处理这个问题，并试图找到各种可能会先发制人的条形信号？

当然，还有一个关于技术和基本面的古老争论——你应该使用一个、两个还是两个都不用？

虽然技术指标通过提供简单的规则和标记来采取更系统的方法，肯定有助于自由交易，但在自动化策略中，它们通常不会单独提供很好的结果。

然而，技术面可能是真正有效的过滤器，可以进一步改善缺乏效率的条目，基本面对于筛选出略有优势的宇宙来说可能是无价的(见[基本面阿尔法因子](/reading-list-trading-enthusiasts/)一书的阅读清单)。

哦，天哪——我甚至没有进入宇宙；

我应该交易单一证券，一个固定的宇宙，比如说 10 种证券，还是一个每天排序和过滤的动态宇宙？

我怎么可能完成一项战略，更别说是一项有利可图的战略了？

首先，我倾向于遵循一条实用主义的规则，为了复杂而避免复杂——即*保持简单。*让我们从一个单一的工具开始，在最简单的平台上*你*(对我来说，TradeStation / Easylanguage，或 Python)选择一个系统要采用的方法。

通常，我从模式开始，然后使用数学或技术概念作为过滤器(关于寻找策略想法的更多信息，见我的文章[定量交易——不断建立进场想法和想法流](/quantitative-trading-building-entry-ideas/))。

我还保存了一个通用的止损/止损包，我用点对点的方式(跟踪止损、目标止损和止损)添加到测试条目中。假设我们从均线和包络指标策略开始，我们有了一些初步的有希望的东西；我们应该审查的度量标准是什么，我们应该期待什么样的价值？

首先——一些基本规则:我从单一合约期货开始，使用*现实*佣金和滑点(每边 3.10+5 美元)，从 3 年回溯测试开始(对于日内模型——在各种市场条件下，你需要至少 500 笔交易)。那现在怎么办？有什么好找的？

从 TradeStation 的顶部开始，看看它如何返回到网上。这不是一个巨大的优先事项，但我的意思是，显然，我们想确保它赚钱。我通常不认为日内系统比去年同期少 20%值得进一步关注。

如果我创建了一个有利可图但不完全符合我的规格的系统，我不会扔掉它们，我会将它们存档以供以后进一步开发——并且我经常回到这个存档中来组合现有的东西或从这里提取一些方面来利用，所以，拥有它们是很好的！当然，与净回报直接相关的是提款，因为 20%的回报和 80%的提款不再有吸引力。

*在这里，我们有了第一个平衡动作*——虽然任何回报都可以通过足够的杠杆来实现，但在保持低水平的情况下是无法实现的。当收益随着激进的资金管理呈线性或指数增长时，提款也是如此！

我期待一个 4+的 Calmar 比率(回报/支出比率),所以 20k 年同比和 5k 日同比将是我最糟糕的情况。理想情况下，我在寻找 10-20+范围内的东西，但许多这些系统最初都是 4。

当然，你也会注意到，在某些情况下，更严格的止损有助于减少亏损，因为它限制了亏损的规模，而在其他情况下，它似乎恰恰相反，只是增加了亏损的可能性。

这很好地把我们带到了下一个(在我看来，也是最重要的)衡量标准的平衡点——胜率和平均胜率:损失。

### **胜率和平均赢:输**

高胜率和高平均 W:L(我称之为 WL，计算为平均盈利交易/平均亏损交易)之间的权衡对系统性能的稳定性至关重要，因为它决定了你的盈利频率，以及这些盈利对你的权益有什么影响。

我喜欢把这些指标的组合看作是交易的预期价值或预期优势，但以后会有更多的讨论。首先—关于胜率 x WL 的一些一般信息。不同种类的系统倾向于使用非常不同的“风格”，在这些“风格”之间有各种灰色区域。

趋势跟踪或[动量倾向于](https://quantra.quantinsti.com/course/momentum-trading-strategies)达到 30-50%的胜率，WL 为> 1，理想情况下是 1.5 或 2.0，但在某些情况下高达 4 或 5(意味着平均盈利比平均亏损大 4 或 5 倍)。

我发现这种风格作为进一步多样化现有系统的方法很有价值。所以用一个例子，回到我的预期边缘方法，让我们计算一个有 40%胜率和 2 WL 的趋势系统的边缘。

**WinPct x AvgW - LossPct x AvgL**

. 4 x 2 - .6 x 1== .8 - .6 = .2 预期边缘

有[均值回归](https://quantra.quantinsti.com/course/python-mean-reversion-strategies-ernest-chan)或逆势风格，通常胜率更高，WL < 1。这是我的大多数系统适合的地方，或者介于这里和我们的第三种系统风格之间。这些往往有 50-70 的胜率，WL 为 0.7-1.2，所以赢家更多，但赢家和输家的规模差不多。

让我们来看看实现这一点的止损/目标参数集，并看看一个系统的 EE 值，该系统的胜率为 70%，赢亏比为 1:1。

. 7 x 1 - .3 x 1 = .4 预期边缘

众所周知，最终的系统风格很难做到，但如果实现了，会有难以置信的利润；这种神话般的融合被称为剥头皮。

当人们有完美的回溯测试，但在现场交易中很快变坏时，刷单系统通常是罪魁祸首——在刷单策略中用简单(错误)的假设(比如没有滑点、佣金和立即执行)很容易欺骗或设计一个完美的回溯测试。

我的大多数系统可能介于刷单和逆势之间——一个普遍的误解是刷单需要很短的时间间隔，但是我在 30 米棒线上交易刷单系统很多年了，没有出现问题。这些系统往往有最高的胜率，和最低的 WL，有时低得令人痛苦。

通常胜率在 65-90 %, WL 在 0 . 2-. 4，而那些 0 . 2-虽然很小-绝不能低于这个值，因为它们是保持系统积极的关键。如果你认为 90%的胜率听起来像一个梦:相信我，8 月 10 日结束一天，赚了 10 美元也有令人沮丧的时候。

让我们通过跟踪预期边缘来避免那些日子，或者更好的是确保*是*一。

0.85 x 0.3-. 15 x 1 = = . 255-. 15 = . 105

没有人喜欢失败，更不用说期望失败了——但正如你通过 Expected Edge 看到的，这确实是一条比尝试几乎没有误差的刷单系统更一致的路线。

倒票系统确实存在，我会给你看几个——但是 90%的成功率也有缺点。同样值得再次注意的是，我相信 90%的无瑕疵回测都是有瑕疵的头皮系统；简单的工程跟踪止损和回望偏差。

![A black and silver text on a screen

Description automatically generated](img/a517d4a8e049dfff303cc47f34d70d74.png)

![A picture containing man

Description automatically generated](img/6e51e033dc1986da9bb962488d08013f.png)

我鼓励大家尝试这些指标，看看哪些有效，哪些无效——我发现我对许多天平的优势感到惊讶，我发现这些优势并不吸引人，我还发现了一些我认为会做得很好的混合优势。

正如您所看到的，拥有这些 90/10 系统并不容易，因为它通常包含经常获胜，随之而来的不可避免的是失败，抹去了数小时的工作。基于你对 EE 的调查，你可以看到利用这些刷单系统盈利有多困难，以及利用这个优势需要大量的交易。

这就是为什么我倾向于处于逆势和刷单的中间，我甚至开始看到趋势系统的价值。

我也认为我应该指出——你可以有一个趋势系统，有刷单风格的均线，反之亦然。这些比率在这些信号类型中很常见，但是 1:1 的 WL 和 50%的胜率并不能自动证明你的系统是均值回归。

我根据信号倾向于利用波动的哪些方面，以及它们擅长的市场，对系统进行分类。要明确的是，这些比率的存在并不一定将信号归类为该类型的系统。

最近，我发现将这些风格结合起来使用很有价值——因为它们可以相互平衡。它们还改变了系统的日常相关性，并倾向于通过简单地为单一核心策略选择大相径庭的参数，甚至在现有系统中创造少量的多样性。是时候让我的自我(和胜率)退居二线了——如果它以某种方式打破了，我会用我增加的优势赢得的钱买一个新的自我。

## **结论**

回报与提款往往是适合性的平衡行为——或者是适合你的风险状况和风险厌恶的衡量标准——但预期优势是适合性的一个因素*和关键盈利能力指标*。

在决定使用哪个系统时，您应该同时考虑这两个因素。不管你喜欢什么样的“风格”，我发现这些指标的平衡是我们将要做出的最重要的决定之一。

在制定战略时考虑这些指标很重要，在选择前进中的参数时-选择不正确的*可以将好的系统变成伟大的系统，* *或* *伟大的系统变成失败的系统。*

-愉快的交易

* * *

编辑注:QuantInsti 尊重作者的选择和偏好，但我们绝不认可、支持或建议本文中的任何品牌。这些观点完全是作者的观点。我们更喜欢并提倡使用 Python 进行量化交易。T3】

*<small>免责声明:本文提供的所有数据和信息仅供参考。QuantInsti 对本文中任何信息的准确性、完整性、现时性、适用性或有效性不做任何陈述，也不对这些信息中的任何错误、遗漏或延迟或因其显示或使用而导致的任何损失、伤害或损害负责。所有信息均按原样提供。</small>*