# 利用机器学习预测 SL/TP 信号

> 原文：<https://blog.quantinsti.com/predicting-sl-tp-signal-machine-learning-project-sunanda/>

交易中最具挑战性的部分是决定何时退出头寸。这个 EPAT 项目可以帮助你预测何时退出买入/卖出头寸。在没有人工干预的情况下，通过使用机器学习来预测 S1/TP 信号。

本文是作者提交的最后一个项目，作为他们在算法交易[高管课程(EPAT](https://www.google.com/url?q=https://www.quantinsti.com/epat&sa=D&ust=1579519264244000)[](https://www.google.com/url?q=https://www.quantinsti.com/epat&sa=D&ust=1579519264245000)[)](https://www.google.com/url?q=https://www.quantinsti.com/epat&sa=D&ust=1579519264245000)的一部分。请务必查看我们的[项目页面](https://www.google.com/url?q=https://blog.quantinsti.com/tag/epat-trading-projects/&sa=D&ust=1579519264246000)，看看我们的学生正在构建什么。

### 关于作者

Sunanda Balla 是一名高级数据科学家，他使用机器学习构建算法交易模型。作为一名定量分析师，苏南达对算法交易、策略构建和回溯测试感兴趣。她拥有 NIT，Warangal 的计算机科学学士学位和 VJTI 的计算机工程硕士学位。Sunanda 拥有 18 年以上的行业经验，担任过各种职务，目前是浦那花旗银行的 AVP。

### 项目摘要

我已经将非结构化的金融数据转换成了美元条。每当预先定义的市场价值被交换时，通过取样观察形成美元棒线。在这些棒线上，我应用了均线交叉策略来决定买/卖位置。

交易中最具挑战性的部分是决定何时退出头寸。对于这个在技术分析中，我们有很多技术指标。在没有人工干预的情况下，使用机器学习技术，我可以预测何时退出买入/卖出头寸。

当我使用元标记技术时，我获得了很好的准确性。

### 介绍

许多金融操作需要基于预定义的规则做出决策，如期权定价、算法执行或风险监控。这是迄今为止大部分自动化发生的地方，将金融市场转变为超高速、超连接的信息交换网络。

在执行这些任务时，机器被要求尽可能快地遵循规则。作为受恐惧、希望和议程影响的情感生物，人类并不特别擅长做出基于事实的决策，尤其是当这些决策涉及利益冲突时。

在这种情况下，当机器根据从硬数据中获得的事实做出决定时，投资者会得到更好的服务。这不仅适用于投资策略开发，也适用于金融建议的几乎每个领域:发放贷款、债券评级、公司分类、招聘人才、预测收益、预测通胀等。

此外，当被编程时，机器将永远遵守法律。如果做出了一个可疑的决定，投资者可以回到日志中，了解到底发生了什么。与完全依赖人类相比，改进算法投资过程要容易得多。在游戏规则每天都在变化的高维世界中，当涉及到识别微妙的模式时，所有的微调都是有害的。

ML 算法可以很容易地发现 100 维世界中的模式。

### 数据挖掘

通常对于任何 ML，“垃圾入，垃圾出”。我们需要做大量的数据预处理，机器学习才能成功。正确组织数据非常重要。

*   **数据收集:**我已经从[这里下载了 IVE (S & P 500 价值指数)的 tick 数据](https://www.google.com/url?q=http://www.kibot.com/free_historical_data.aspx&sa=D&ust=1579519264251000)。数据包含每个分笔成交点的日期、时间、价格、出价、要价和成交量字段。
*   **数据准备:**检查价格异常值。使用绝对偏差中值(MAD)方法检测价格中的异常值，并删除这些价格。
*   **美元棒线:**金融从业者通常将 OHLC 数据行称为“棒线”。标准时间条是以固定的时间间隔对分笔成交点进行采样，与之不同的是信息驱动的时间条。我运用了“美元棒”的技巧。每当交易的美元总额超过阈值，就产生一个 OHLC 棒线。接下来，我生成了信息标签来指示何时退出美元棒线上的买入/卖出头寸。该方法解释如下。
*   **波动率计算:**理解市场的第一步是理解回报率的波动率。当我们使用 1 天时间线时，我们计算的是日收益率的波动性。这里我在看美元棒线(不考虑时间)，所以我计算了美元棒线回报的波动性。我用过帕金森历史波动率(HL_ HV)。物理学家迈克尔·帕金森在 1980 年提出的帕金森指数，即高低波动范围，旨在使用任意数量的棒线中的高低点来估计随机游走的回报率的波动性。
    T3】
*   **实施移动平均交叉策略:**
*   **买入/卖出位置(信号):**只要满足以下条件，就会生成该位置。
    *   对数回报率是平均波动率的 3 倍以上。这是为了确保信号是非常强的信号。
    *   3 条均线和 7 条均线向上/向下交叉。
*   **手工生成 SL/TP 标签:**(止损(SL)和止盈(TP))
    *   以下方法用于生成服务订单/运输计划。
    *   考虑了决定 SL/TP 的 3 个障碍。当对数收益突破阈值时，两个水平障碍一个在上，一个在下。一个垂直障碍在两美元酒吧完成。
    *   有三个障碍(下障碍，上障碍，垂直/美元障碍)。基于首先触摸的内容，生成 SL/TP。

现在我们已经使用策略建立了一个模型。接下来，我们将看看是否有可能使用技术指标和机器学习来预测一个标签(SL/TP)。这样我们可以自动生成标签。

机器学习:美元棒线有开盘价、最高价、最低价、收盘价，每个棒线都有成交量。

*   **特征生成:**我用 Python 中的一个包生成过很多技术指标。由此我删除了那些相关性为> = 50%的特征。
*   **元标记:**当我实施了移动平均交叉策略(如上所述)时，产生了三种类型的信号(0，1，-1)。我们可以建立一个模型来预测阶级(1 对 1)。当我尝试这样做时，我只有 54%的准确率。但是正如讨论过的[1]，我们可以建立一个模型来预测类(0 Vs [ 1，-1])。因此，我使用元标记技术实现了逻辑 T2 回归。这给出了 64.85%的准确度。

### 主要发现

1.  美元吧
2.  波动率计算
3.  技术指标-IID 特征生成
4.  机器学习技术

### 结论

**该模型对 SL/TP 的检测准确率为 65.86%。我们可以通过做更多的研究来改进这个模型。**

如果你想学习算法交易的各个方面，那就去看看算法交易的[执行课程(EPAT](https://www.google.com/url?q=https://www.quantinsti.com/epat/&sa=D&ust=1579519264257000) )。课程涵盖统计学&计量经济学、金融计算&技术和算法&定量交易等培训模块。EPAT 教你在算法交易中建立一个有前途的职业所需的技能。

如果你想学习在金融市场数据上使用 SVM，并创建自己的预测算法，那么你也可以看看 Quantra 的[交易与机器学习:分类和 SVM](https://quantra.quantinsti.com/course/trading-machine-learning-classification-svm) 。该课程涵盖分类算法、机器学习中的性能测量、超参数和监督分类器的构建。

免责声明:就我们学生所知，本项目中的信息是真实和完整的。学生或 QuantInsti 不保证提供所有推荐。学生和 QuantInsti 否认与这些信息的使用有关的任何责任。本项目中提供的所有内容仅供参考，我们不保证通过使用该指南您将获得一定的利润。

**下载中的文件:**

*   美元吧
*   特征生成
*   给数据库加标签
*   使用数据标记的模型拟合